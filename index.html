
<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hippopotamus Research</title>
    <link href="https://fonts.googleapis.com/css2?family=Heebo:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root {
            --primary-color: #1a1a2e;
            --secondary-color: #16213e;
            --accent-color: #0f3460;
            --highlight-color: #e94560;
            --text-light: #ffffff;
            --text-dark: #1a1a2e;
            --gradient-primary: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            --gradient-accent: linear-gradient(135deg, #e94560 0%, #ff6b6b 100%);
            --shadow-primary: 0 20px 40px rgba(26, 26, 46, 0.15);
            --shadow-accent: 0 10px 30px hsl(283, 47%, 78%);
            --search-bg: #eaf6fb;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Heebo', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: var(--gradient-primary);
            min-height: 100vh;
            padding: 20px;
            direction: rtl;
            color: var(--text-light);
            line-height: 1.6;
            max-width: 100vw;
            overflow-x: hidden;
        }
        
        .container {
            max-width: 98vw;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: var(--shadow-primary);
            overflow: hidden;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .header {
            background: var(--gradient-primary);
            color: var(--text-light);
            padding: 0;
            position: relative;
            overflow: hidden;
        }
        
        .header::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: 
                radial-gradient(circle at 30% 30%, rgba(233, 69, 96, 0.2) 0%, transparent 50%),
                radial-gradient(circle at 70% 70%, rgba(15, 52, 96, 0.2) 0%, transparent 50%);
            animation: float 6s ease-in-out infinite;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(180deg); }
        }
        
        .header-content {
            position: relative;
            z-index: 2;
            padding: 40px 30px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        
        .logo-section {
            display: flex;
            align-items: center;
            gap: 20px;
        }
        
        .logo-container {
            position: relative;
            width: 120px;
            height: 120px;
            background: var(--gradient-accent);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: var(--shadow-accent);
            animation: pulse 2s ease-in-out infinite;
            overflow: hidden;
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        
        .logo-container::before {
            content: '';
            position: absolute;
            top: -5px;
            left: -5px;
            right: -5px;
            bottom: -5px;
            background: var(--gradient-accent);
            border-radius: 50%;
            z-index: -1;
            opacity: 0.3;
            animation: pulse 2s ease-in-out infinite reverse;
        }
        
        .logo-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 50%;
            display: block;
        }
        
        .logo-image img {
            width: 100%;
            height: 100%;
            object-fit: contain;
            border-radius: 50%;
        }
        
        .brand-info {
            text-align: right;
        }
        
        .brand-name {
            font-size: 2.2em;
            font-weight: 700;
            margin-bottom: 5px;
            background: linear-gradient(45deg, #ffffff, #e94560);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .brand-subtitle {
            font-size: 1.1em;
            opacity: 0.9;
            font-weight: 300;
            position: relative;
            overflow: hidden;
            white-space: nowrap;
            animation: typing 3s steps(40, end), gradient-shift 4s ease-in-out infinite;
            background: linear-gradient(45deg, #ffffff, #e94560, #0f3460, #ffffff);
            background-size: 300% 300%;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            transition: all 0.3s ease;
        }
        
        .brand-subtitle:hover {
            transform: scale(1.05);
            text-shadow: 0 0 20px rgba(233, 69, 96, 0.5);
        }
        
        @keyframes typing {
            from { width: 0; }
            to { width: 100%; }
        }
        
        @keyframes blink-caret {
            from, to { border-color: transparent; }
            50% { border-color: var(--highlight-color); }
        }
        
        @keyframes gradient-shift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        
        .social-section {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .follow-btn {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            background: linear-gradient(90deg, #3b2667 0%, #4e54c8 100%);
            color: #fff;
            border-radius: 30px;
            text-decoration: none;
            font-weight: 700;
            font-size: 1em;
            box-shadow: 0 4px 16px rgba(78,84,200,0.13);
            transition: background 0.3s, transform 0.2s, box-shadow 0.2s;
            border: none;
            outline: none;
            cursor: pointer;
            position: relative;
            overflow: hidden;
            min-width: 120px;
            min-height: 44px;
            justify-content: center;
            padding: 10px 22px;
        }
        .follow-btn:hover {
            background: linear-gradient(90deg, #4e54c8 0%, #283e51 100%);
            transform: translateY(-2px) scale(1.04);
            box-shadow: 0 8px 24px rgba(78,84,200,0.18);
        }
        .x-share-btn-custom {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            background: linear-gradient(90deg, #14171a 0%, #1da1f2 100%);
            color: #fff;
            border-radius: 30px;
            text-decoration: none;
            font-weight: 700;
            font-size: 1em;
            box-shadow: 0 4px 16px rgba(29,161,242,0.10);
            transition: background 0.3s, transform 0.2s, box-shadow 0.2s;
            border: none;
            outline: none;
            cursor: pointer;
            position: relative;
            overflow: hidden;
            min-width: 120px;
            min-height: 44px;
            justify-content: center;
            padding: 10px 22px;
        }
        .x-share-btn-custom:hover {
            background: linear-gradient(90deg, #1da1f2 0%, #14171a 100%);
            transform: translateY(-2px) scale(1.04);
            box-shadow: 0 8px 24px rgba(29,161,242,0.18);
        }
        .follow-btn .x-icon, .x-share-btn-custom .x-icon {
            width: 28px;
            height: 28px;
            min-width: 28px;
            min-height: 28px;
            background: transparent;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background 0.3s;
            box-shadow: 0 2px 8px rgba(123,47,242,0.10);
        }
        .follow-btn:hover .x-icon {
            background: #1da1f2;
        }
        .x-share-btn-custom:hover .x-icon {
            background: #1da1f2;
        }
        .follow-btn .x-icon img, .x-share-btn-custom .x-icon img {
            width: 16px;
            height: 16px;
            transform: scale(1.56);
        }
        @media (max-width: 768px) {
            .follow-btn, .x-share-btn-custom {
                min-width: 90px;
                min-height: 32px;
                font-size: 0.93em;
                padding: 6px 8px;
                border-radius: 18px;
                font-family: 'Heebo', 'Segoe UI', sans-serif;
                font-weight: 700;
                letter-spacing: 0.01em;
                box-shadow: 0 2px 8px rgba(78,84,200,0.10);
                gap: 7px;
            }
            .follow-btn .x-icon, .x-share-btn-custom .x-icon {
                width: 18px;
                height: 18px;
                min-width: 18px;
                min-height: 18px;
            }
            .follow-btn .x-icon img, .x-share-btn-custom .x-icon img {
                width: 16px;
                height: 16px;
                transform: scale(1.56);
            }
        }
        
        .content {
            padding: 40px 30px;
            color: var(--text-dark);
        }
        
        .welcome-section {
            background: rgba(233, 69, 96, 0.1);
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            text-align: center;
        }
        
        .welcome-section h2 {
            color: var(--accent-color);
            margin-bottom: 15px;
            font-size: 1.8em;
        }
        
        .welcome-section p {
            color: var(--text-dark);
            font-size: 1.1em;
            margin-bottom: 20px;
        }
        
        .articles-grid {
            display: flex;
            overflow-x: auto;
            gap: 30px;
            margin-top: 30px;
            padding: 20px 0;
            scroll-behavior: smooth;
            -webkit-overflow-scrolling: touch;
        }
        
        .articles-grid::-webkit-scrollbar {
            height: 8px;
        }
        
        .articles-grid::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.1);
            border-radius: 4px;
        }
        
        .articles-grid::-webkit-scrollbar-thumb {
            background: var(--highlight-color);
            border-radius: 4px;
        }
        
        .articles-grid::-webkit-scrollbar-thumb:hover {
            background: #d63384;
        }
        
        .article-card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            border: 1px solid rgba(0, 0, 0, 0.05);
            width: 350px;
            height: 350px;
            flex-shrink: 0;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }
        
        .article-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
        }
        
        .article-ticker {
            background: var(--gradient-accent);
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            font-weight: 600;
            font-size: 0.9em;
            display: inline-block;
            margin-bottom: 15px;
        }
        
        .article-title {
            font-size: 1.3em;
            font-weight: 600;
            margin-bottom: 15px;
            color: var(--text-dark);
            line-height: 1.4;
        }
        
        .article-summary {
            color: #666;
            margin-bottom: 20px;
            line-height: 1.6;
            display: -webkit-box;
            line-clamp: 3; -webkit-line-clamp: 3;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }
        
        .article-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.9em;
            color: #888;
        }
        
        .article-link {
            background: var(--gradient-primary);
            color: white;
            padding: 10px 20px;
            border-radius: 25px;
            text-decoration: none;
            font-weight: 500;
            transition: all 0.3s ease;
            display: inline-block;
        }
        
        .article-link:hover {
            background: var(--gradient-accent);
            transform: translateY(-2px);
        }
        
        .loading {
            text-align: center;
            padding: 40px;
            color: var(--text-light);
        }
        
        .loading i {
            font-size: 2em;
            color: var(--highlight-color);
            animation: spin 2s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .no-articles {
            text-align: center;
            padding: 40px;
            color: var(--text-light);
        }
        
        .no-articles i {
            font-size: 3em;
            color: var(--highlight-color);
            margin-bottom: 20px;
        }
        
        .disclaimer {
            background: rgba(255, 193, 7, 0.1);
            border: 1px solid rgba(255, 193, 7, 0.3);
            border-radius: 10px;
            padding: 20px;
            margin: 30px 0;
            color: var(--text-light);
            font-size: 0.9em;
            line-height: 1.6;
        }
        
        .disclaimer strong {
            color: #ffc107;
            display: block;
            margin-bottom: 10px;
        }
        
        .disclaimer h3 {
            background: linear-gradient(45deg, #ffffff, #e94560);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-top: 15px;
            margin-bottom: 0;
            font-size: 1.2em;
        }
        
        .footer {
            background: var(--gradient-primary);
            color: var(--text-light);
            padding: 20px 30px;
            text-align: center;
            font-size: 0.9em;
            opacity: 0.8;
        }
        
        .footer .timestamp {
            margin-bottom: 5px;
        }
        
        .footer .source {
            font-style: italic;
        }
        
        .scroll-hint {
            display: none;
            text-align: center;
            color: var(--highlight-color);
            font-size: 1.1em;
            margin-bottom: 10px;
            opacity: 0.85;
            user-select: none;
            pointer-events: none;
            font-weight: 500;
            letter-spacing: 0.02em;
        }
        .scroll-hint i {
            font-size: 1.5em;
            vertical-align: middle;
            margin: 0 5px;
            animation: bounce-x 1.5s infinite;
        }
        @keyframes bounce-x {
            0%, 100% { transform: translateX(0); }
            50% { transform: translateX(12px); }
        }
        @media (max-width: 768px) {
            .container {
                width: 100vw;
                max-width: 100vw;
                border-radius: 0 10px 20px 0;
                padding: 0;
                margin: 0 -22px 0 0;
                right: 0;
                left: auto;
                position: relative;
                border: none;
                background: transparent;
            }
            .content, .welcome-section {
                color: var(--text-dark);
            }
            .welcome-section h1, .welcome-section h2, .welcome-section p {
                color: var(--text-dark);
                text-align: center;
            }
            .articles-grid {
                gap: 20px;
                padding: 15px 0;
            }
            
            .article-card {
                width: 300px;
                height: 300px;
                padding: 20px;
            }
            
            .header-content {
                flex-direction: column;
                gap: 10px;
                text-align: center;
            }
            
            .logo-section {
                flex-direction: column;
                align-items: center;
                gap: 4px;
                max-width: 100vw;
                width: 100%;
            }
            .logo-container {
                width: 56px;
                height: 56px;
                aspect-ratio: 1/1;
                border-radius: 50%;
                overflow: hidden;
                box-shadow: var(--shadow-accent);
            }
            .logo-image {
                width: 48px;
                height: 48px;
                border-radius: 50%;
                object-fit: cover;
                aspect-ratio: 1/1;
            }
            .brand-info {
                max-width: 260px;
                width: 100%;
                overflow: visible;
                text-overflow: unset;
                white-space: normal;
                word-break: break-word;
                text-align: center;
            }
            .brand-name {
                font-size: 0.98em;
                font-weight: 700;
                margin-bottom: 2px;
                letter-spacing: 0.01em;
                white-space: normal;
                background: linear-gradient(45deg, #ffffff 0%, #e94560 100%);
                -webkit-background-clip: text;
                -webkit-text-fill-color: transparent;
                background-clip: text;
                text-fill-color: transparent;
            }
            .brand-subtitle {
                font-size: 0.78em;
                opacity: 0.85;
                font-weight: 500;
            }
            .social-section {
                gap: 5px;
                flex-wrap: wrap;
                justify-content: center;
            }
            .scroll-hint {
                display: block;
            }
            html, body {
                max-width: 100vw;
                overflow-x: hidden;
            }
            .welcome-section {
                background: rgba(255,255,255,0.85) !important;
                padding: 18px 10px !important;
            }
            .welcome-section h1 {
                font-size: 1.4em !important;
            }
            .welcome-section p {
                font-size: 0.98em !important;
            }
            .newsletter-section > div:first-child {
                color: #e6b800 !important; /* not too bright yellow */
            }
            #welcome-toggle-btn {
                display: flex;
                align-items: center;
                justify-content: center;
                gap: 8px;
                width: 100%;
                background: linear-gradient(90deg, #14171a 0%, #1da1f2 100%);
                color: #fff;
                border-radius: 30px;
                font-weight: 700;
                font-size: 1em;
                box-shadow: 0 4px 16px rgba(29,161,242,0.10);
                border: none;
                outline: none;
                cursor: pointer;
                padding: 10px 22px;
                margin: 0 0 12px 0;
                text-align: center;
                letter-spacing: 0.03em;
                transition: background 0.3s, transform 0.2s, box-shadow 0.2s;
                animation: welcomePulse 1.6s infinite alternate;
            }
            #welcome-toggle-btn:active, #welcome-toggle-btn:focus {
                background: linear-gradient(90deg, #1da1f2 0%, #14171a 100%);
                color: #fff;
                outline: none;
            }
            @keyframes welcomePulse {
                0% {
                    box-shadow: 0 0 0 0 rgba(29,161,242,0.18), 0 4px 16px rgba(29,161,242,0.10);
                }
                100% {
                    box-shadow: 0 0 16px 8px rgba(29,161,242,0.22), 0 4px 16px rgba(29,161,242,0.10);
                }
            }
            .welcome-section {
                transition: max-height 0.35s cubic-bezier(0.4,0,0.2,1), opacity 0.3s;
                overflow: hidden;
                max-height: 0;
                opacity: 0;
                margin-bottom: 0;
            }
            .welcome-section.open {
                max-height: 900px;
                opacity: 1;
                margin-bottom: 30px;
            }
            #newsletter-toggle-btn {
                display: flex;
                align-items: center;
                justify-content: center;
                gap: 8px;
                width: 100%;
                background: linear-gradient(90deg, #14171a 0%, #1da1f2 100%);
                color: #fff;
                border-radius: 30px;
                font-weight: 700;
                font-size: 1em;
                box-shadow: 0 4px 16px rgba(29,161,242,0.10);
                border: none;
                outline: none;
                cursor: pointer;
                padding: 10px 22px;
                margin: 0 0 12px 0;
                text-align: center;
                letter-spacing: 0.03em;
                transition: background 0.3s, transform 0.2s, box-shadow 0.2s;
                animation: welcomePulse 1.6s infinite alternate;
            }
            #newsletter-toggle-btn:active, #newsletter-toggle-btn:focus {
                background: linear-gradient(90deg, #1da1f2 0%, #14171a 100%);
                color: #fff;
                outline: none;
            }
            .newsletter-section {
                background: none;
                border-radius: 12px;
                box-shadow: 0 2px 8px rgba(15,52,96,0.07);
                padding: 4px 0 2px 0;
                border: none;
                transition: none;
                max-width: 420px;
                margin: 0 auto 24px auto;
            }
            .newsletter-section.open {
                max-height: 900px;
                opacity: 1;
                margin-bottom: 24px;
            }
            .archive-link-section {
                max-width: 420px;
                margin: 18px auto 28px auto;
            }
        }
        @media (max-width: 480px) {
            .logo-container { width: 48px !important; height: 48px !important; }
            .logo-image { width: 40px !important; height: 40px !important; }
            .brand-name { font-size: 1em !important; }
            .brand-subtitle { font-size: 0.8em !important; }
            .header-content { gap: 10px !important; }
        }
        .search-tags-container {
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 25%, #0f3460 50%, #1a1a2e 75%, #16213e 100%);
            background-size: 400% 400%;
            animation: gradientShift 8s ease-in-out infinite;
            border-radius: 0;
            box-shadow: 
                0 8px 32px rgba(15, 52, 96, 0.3),
                0 0 0 1px rgba(233, 69, 96, 0.1),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
            padding: 32px 30px 22px 30px;
            margin: 0 auto 36px auto;
            width: 100%;
            max-width: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            border: 1.5px solid rgba(233, 69, 96, 0.2);
            position: relative;
            overflow: hidden;
        }
        
        .search-tags-container::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: 
                radial-gradient(circle at 30% 30%, rgba(233, 69, 96, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 70% 70%, rgba(15, 52, 96, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 50% 50%, rgba(255, 255, 255, 0.05) 0%, transparent 50%);
            animation: float 6s ease-in-out infinite;
            pointer-events: none;
        }
        
        .search-tags-container::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(45deg, transparent 30%, rgba(255, 255, 255, 0.03) 50%, transparent 70%);
            animation: shimmer 3s ease-in-out infinite;
            pointer-events: none;
        }
        
        @keyframes gradientShift {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(180deg); }
        }
        
        @keyframes shimmer {
            0%, 100% { opacity: 0; transform: translateX(-100%); }
            50% { opacity: 1; transform: translateX(100%); }
        }
        
        .search-bar {
            width: 100%;
            max-width: 480px;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 18px;
            box-shadow: 
                0 4px 16px rgba(15, 52, 96, 0.15),
                0 0 0 1px rgba(255, 255, 255, 0.2);
            padding: 0 10px;
            display: flex;
            align-items: center;
            margin-bottom: 14px;
            border: 1px solid rgba(255, 255, 255, 0.3);
            position: relative;
            z-index: 2;
        }
        .search-bar input {
            background: transparent;
            border: none;
            outline: none;
            font-size: 1.1em;
            flex: 1;
            padding: 14px 8px 14px 0;
            color: var(--text-dark);
        }
        .search-bar .search-button, .search-bar .clear-button {
            background: linear-gradient(135deg, #e94560 60%, #ff6b6b 100%);
            color: #fff;
            border: none;
            border-radius: 50%;
            width: 36px;
            height: 36px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-left: 6px;
            font-size: 1.1em;
            transition: all 0.3s ease;
            box-shadow: 0 2px 8px rgba(233,69,96,0.2);
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }
        .search-bar .clear-button {
            background: linear-gradient(135deg, #0f3460 60%, #16213e 100%);
            color: #fff;
        }
        .search-bar .search-button::before, .search-bar .clear-button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            transition: left 0.5s;
        }
        .search-bar .search-button:hover::before, .search-bar .clear-button:hover::before {
            left: 100%;
        }
        .search-bar .search-button:hover {
            background: linear-gradient(135deg, #ff6b6b 60%, #e94560 100%);
            transform: scale(1.05);
            box-shadow: 0 4px 16px rgba(233,69,96,0.3);
        }
        .search-bar .clear-button:hover {
            background: linear-gradient(135deg, #16213e 60%, #0f3460 100%);
            transform: scale(1.05);
            box-shadow: 0 4px 16px rgba(15,52,96,0.3);
        }
        .tags-section {
            width: 100%;
            margin: 0 auto 0 auto;
            max-width: 100%;
            text-align: center;
            position: relative;
            z-index: 2;
        }
        .tags-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 10px;
            margin-bottom: 0;
            max-width: 100%;
        }
        .tag-btn {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            color: #fff;
            border: 1px solid rgba(255, 255, 255, 0.2);
            padding: 10px 20px;
            border-radius: 22px;
            cursor: pointer;
            font-size: 1.1em;
            font-weight: 500;
            box-shadow: 
                0 2px 8px rgba(15, 52, 96, 0.2),
                0 0 0 1px rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
            outline: none;
            position: relative;
            overflow: hidden;
        }
        .tag-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
            transition: left 0.5s;
        }
        .tag-btn:hover::before {
            left: 100%;
        }
        .tag-btn.active, .tag-btn:hover {
            background: linear-gradient(135deg, #4a148c 60%, #6a1b9a 100%);
            color: #fff;
            box-shadow: 
                0 4px 16px rgba(74, 20, 140, 0.3),
                0 0 0 1px rgba(74, 20, 140, 0.3);
        }
        @media (max-width: 600px) {
            .search-tags-container {
                max-width: 100%;
                width: 100%;
                padding: 16px 20px 12px 20px;
            }
            .search-bar {
                padding: 0 4px;
                max-width: 100%;
            }
            .tags-container {
                gap: 6px;
                max-width: 100%;
            }
            .tag-btn {
                font-size: 1em;
                padding: 8px 16px;
            }
        }
        
        /* Mobile-specific optimizations for tags and search */
        @media (max-width: 480px) {
            .search-bar {
                padding: 0 6px;
                border-radius: 16px;
                margin-bottom: 12px;
            }
            .search-bar input {
                font-size: 0.95em;
                padding: 12px 6px 12px 0;
            }
            .search-bar .search-button, .search-bar .clear-button {
                width: 32px;
                height: 32px;
                font-size: 0.9em;
                margin-left: 4px;
            }
            .tags-container {
                gap: 3px;
                justify-content: flex-start;
                padding: 0 4px;
            }
            .tag-btn {
                font-size: 0.93em;
                font-weight: 700;
                font-family: 'Heebo', 'Segoe UI', sans-serif;
                padding: 6px 8px;
                border-radius: 18px;
                min-width: fit-content;
                white-space: nowrap;
                flex-shrink: 0;
                letter-spacing: 0.01em;
            }
            .tag-btn i {
                font-size: 0.85em;
                margin-right: 3px;
            }
        }
        
        @media (max-width: 360px) {
            .search-bar input {
                font-size: 0.9em;
                padding: 10px 4px 10px 0;
            }
            .search-bar .search-button, .search-bar .clear-button {
                width: 28px;
                height: 28px;
                font-size: 0.8em;
            }
            .tag-btn {
                font-size: 0.93em;
                font-weight: 700;
                font-family: 'Heebo', 'Segoe UI', sans-serif;
                padding: 6px 8px;
                border-radius: 18px;
                letter-spacing: 0.01em;
            }
            .tag-btn i {
                font-size: 0.85em;
                margin-right: 3px;
            }
        }
        
        /* Order tags by text length on mobile */
        @media (max-width: 480px) {
            .tags-container {
                display: grid;
                grid-template-columns: repeat(auto-fill, minmax(auto, 1fr));
                gap: 3px;
                justify-items: start;
            }
            .tag-btn[data-tag="all"] { order: 1; }
            .tag-btn[data-tag="סקטור: Energy"] { order: 2; }
            .tag-btn[data-tag="סקטור: Materials"] { order: 3; }
            .tag-btn[data-tag="סקטור: Utilities"] { order: 4; }
            .tag-btn[data-tag="סקטור: Real Estate"] { order: 5; }
            .tag-btn[data-tag="סקטור: Industrials"] { order: 6; }
            .tag-btn[data-tag="סקטור: Financials"] { order: 7; }
            .tag-btn[data-tag="סקטור: Health Care"] { order: 8; }
            .tag-btn[data-tag="סקטור: Communication Services"] { order: 9; }
            .tag-btn[data-tag="סקטור: Consumer Staples"] { order: 10; }
            .tag-btn[data-tag="סקטור: Consumer Discretionary"] { order: 11; }
            .tag-btn[data-tag="סקטור: Information Technology"] { order: 12; }
        }
        .company-badges-bar {
            display: flex;
            flex-wrap: wrap;
            gap: 7px;
            margin-bottom: 10px;
            overflow-x: auto;
            padding-bottom: 2px;
            scrollbar-width: thin;
        }
        .company-badge {
            background: linear-gradient(90deg, #0f3460 0%, #e94560 100%);
            color: #fff;
            border-radius: 16px;
            padding: 5px 12px;
            font-size: 0.95em;
            font-weight: 500;
            box-shadow: 0 2px 8px rgba(15,52,96,0.08);
            letter-spacing: 0.02em;
            display: inline-block;
            margin-bottom: 2px;
            border: none;
            outline: none;
            transition: background 0.2s;
            white-space: nowrap;
        }
        .company-badge:hover {
            background: linear-gradient(90deg, #e94560 0%, #0f3460 100%);
        }
        @media (max-width: 768px) {
            .company-badges-bar {
                gap: 5px;
                margin-bottom: 7px;
                padding-bottom: 4px;
                overflow-x: auto;
                -webkit-overflow-scrolling: touch;
            }
            .company-badge {
                font-size: 0.9em;
                padding: 4px 9px;
            }
        }
        .newsletter-archive-row {
            display: flex;
            flex-direction: row;
            justify-content: center;
            align-items: flex-start;
            gap: 32px;
            margin: 0 auto 32px auto;
            width: 100%;
            max-width: 900px;
        }
        .newsletter-archive-row .newsletter-section,
        .newsletter-archive-row .archive-link-section {
            margin: 0;
            max-width: 420px;
            flex: 1 1 0;
        }
        @media (max-width: 768px) {
            .newsletter-archive-row {
                display: block;
                max-width: 98vw;
                margin: 0;
                gap: 0;
            }
            .newsletter-archive-row .newsletter-section,
            .newsletter-archive-row .archive-link-section {
                max-width: 98vw;
                width: 100%;
                margin: 0 0 18px 0;
            }
        }
        .newsletter-section, .archive-link-section {
            background: #fff;
            border-radius: 16px;
            box-shadow: 0 2px 12px rgba(15,52,96,0.10);
            padding: 22px 18px 18px 18px;
            border: none;
            transition: box-shadow 0.2s;
            max-width: 420px;
            margin: 0 auto 24px auto;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        .archive-link-section {
            margin: 0 auto 24px auto;
        }
        .archive-link-btn {
            display: block;
            font-weight: 700;
            font-size: 0.92em;
            padding: 8px 0;
            width: calc(100% - 48px);
            margin-left: 24px;
            margin-right: 24px;
            text-align: center;
            border-radius: 26px;
            background: linear-gradient(90deg, #a18cd1 0%, #6d5bba 100%);
            color: #fff;
            box-shadow: 0 4px 18px rgba(109,91,186,0.13);
            text-decoration: none;
            transition: background 0.22s, box-shadow 0.22s, transform 0.15s;
            letter-spacing: 0.04em;
            margin-top: 10px;
            margin-bottom: 0;
            border: none;
            outline: none;
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }
        .archive-link-btn:hover, .archive-link-btn:focus {
            background: linear-gradient(90deg, #6d5bba 0%, #a18cd1 100%);
            box-shadow: 0 8px 28px rgba(109,91,186,0.18);
            transform: translateY(-2px) scale(1.04);
        }
        @media (max-width: 768px) {
            .newsletter-section, .archive-link-section {
                max-width: 98vw;
                width: 100%;
                padding: 12px 4vw 12px 4vw;
                margin: 0 0 18px 0;
            }
            .archive-link-btn {
                font-size: 0.95em;
                padding: 8px 12px;
                border-radius: 22px;
            }
        }
        /* Add a shared class for section descriptions */
        .section-description {
            font-size: 1em;
            color: var(--accent-color);
            margin-bottom: 8px;
            font-weight: 500;
            opacity: 0.85;
            text-align: center;
        }
        @media (min-width: 769px) {
            .welcome-newsletter-card {
                display: flex;
                flex-direction: row;
                justify-content: center;
                align-items: stretch;
                background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
                color: var(--text-dark);
                border-radius: 16px;
                box-shadow: 0 2px 12px rgba(26,26,46,0.13);
                padding: 18px 10px;
                width: 100%;
                max-width: 100vw;
                margin: 0 0 24px 0;
                font-size: 1.07em;
                font-family: inherit;
                min-height: 220px;
            }
            .welcome-newsletter-card .about-content {
                flex: 2 1 0;
                padding-left: 24px;
            }
            .welcome-newsletter-card .about-content h1 {
                color: var(--accent-color);
                background: none !important;
                -webkit-text-fill-color: var(--accent-color) !important;
                text-fill-color: var(--accent-color) !important;
                font-size: 2.1em;
                font-weight: 900;
                margin-bottom: 8px;
                letter-spacing: 0.04em;
                text-shadow: 0 2px 8px rgba(26,26,46,0.10);
            }
            .welcome-newsletter-card .about-content p {
                color: var(--text-dark);
                font-size: 1.07em;
                font-weight: 400;
                margin-bottom: 10px;
                opacity: 0.95;
            }
            .welcome-newsletter-card .divider {
                width: 1.5px;
                background: #bbb;
                margin: 0 18px;
                border-radius: 2px;
                min-height: 140px;
                align-self: stretch;
            }
            .welcome-newsletter-card .newsletter-content {
                flex: 1 1 0;
                display: flex;
                flex-direction: column;
                justify-content: center;
                align-items: flex-start;
                min-width: 0;
                min-height: 140px;
            }
            .welcome-newsletter-card .newsletter-content .section-description,
            .welcome-newsletter-card .newsletter-content p {
                color: var(--text-dark);
                font-size: 1.07em;
                font-weight: 400;
                margin-bottom: 10px;
                opacity: 0.95;
            }
            .welcome-newsletter-card .newsletter-content hr {
                border-top: 1.5px solid #bbb !important;
                margin: 16px 0 10px 0 !important;
                width: 100%;
            }
            .welcome-newsletter-card .newsletter-content .archive-link-btn {
                color: #fff;
            }
        }
        @media (max-width: 768px) {
            .welcome-newsletter-card {
                display: block !important;
                background: #fff !important;
                color: var(--text-dark) !important;
                border-radius: 16px !important;
                box-shadow: 0 2px 12px rgba(15,52,96,0.10) !important;
                padding: 12px 4vw 12px 4vw !important;
                margin: 0 0 18px 0 !important;
                width: 100% !important;
                max-width: 98vw !important;
                min-height: unset !important;
            }
            .welcome-newsletter-card .about-content,
            .welcome-newsletter-card .newsletter-content {
                background: none !important;
                color: var(--text-dark) !important;
                border-radius: 12px !important;
                box-shadow: none !important;
                padding: 0 !important;
                margin: 0 0 18px 0 !important;
            }
            .welcome-newsletter-card .divider {
                display: none !important;
            }
            .welcome-newsletter-card .about-content h1 {
                color: var(--accent-color) !important;
                background: none !important;
                -webkit-text-fill-color: var(--accent-color) !important;
                text-fill-color: var(--accent-color) !important;
                font-size: 1.3em !important;
                font-weight: 900 !important;
                margin-bottom: 8px !important;
                letter-spacing: 0.04em !important;
                text-shadow: none !important;
            }
            .welcome-newsletter-card .about-content p,
            .welcome-newsletter-card .newsletter-content .section-description,
            .welcome-newsletter-card .newsletter-content p {
                color: var(--text-dark) !important;
                font-size: 1em !important;
                font-weight: 400 !important;
                margin-bottom: 10px !important;
                opacity: 0.95 !important;
            }
            .welcome-newsletter-card .newsletter-content hr {
                border-top: 1.5px solid #eee !important;
                margin: 16px 0 10px 0 !important;
                width: 100% !important;
            }
            .welcome-newsletter-card .newsletter-content .archive-link-btn {
                color: #fff !important;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="header-content">
                <div class="logo-section">
                    <div class="logo-container">
                        <img class="logo-image" src="articles/logo.png" alt="Hippopotamus Research Logo" />
                    </div>
                    <div class="brand-info">
                        <div class="brand-name">Hippopotamus Research</div>
                        <div class="brand-subtitle">אלגוריתם סיקור יומי  </div>
                    </div>
                </div>
                <div class="social-section">
                    <a class="follow-btn" href="https://x.com/LmlyhNyr" rel="noopener" target="_blank">
                        <span class="x-icon"><img alt="X" src="articles/x.png" style="width:16px;height:16px;"></span>
                        עקבו אחרינו
                    </a>
                    <button type="button" class="x-share-btn-custom" id="main-x-share-btn">
                        <span class="x-icon"><img src="articles/x.png" alt="X" style="width:16px;height:16px;"></span>
                        שתף ב־X
                    </button>
                </div>
            </div>
        </div>
       
          
            <div id="articles-container">
                <div class="loading">
                    <i class="fas fa-spinner"></i>
                    <p>טוען כתבות...</p>
            </div>
        </div>
        
        <div class="content">
          
            <button id="welcome-toggle-btn" style="display:none;">אודות המערכת</button>
            <div class="welcome-newsletter-card">
                <div class="about-content">
                    <h1>Hippopotamus Research</h1>
                    <p>מערכת אוטומטית לזיהוי הגורמים שמאחורי תנועות שוק </p>
                    <p>מפעילה מנוע ניתוח אלגוריתמי שפועל בסיום כל יום מסחר, ומאתר תנועות מניה שאינן מוסברות בתנועת השוק הכללי או במדדי הסקטור.</p>
                    <p>לאחר הזיהוי, האלגוריתם מנתח מאות מקורות: הצהרות הנהלה, רגולציה חדשה, עסקאות מוסדיים, תביעות, עסקאות פנים, תזוזות בסקטור, ונתוני סנטימנט – במטרה לבודד את הגורמים האפשריים לתנועה.</p>
                    <p>כל פרסום עובר ולידציה אנושית מינימלית, במטרה לוודא דיוק וניקיון, אך התהליך כולו מונע על ידי קוד , ללא נרטיבים וללא תלות בפרשנות אנושית.</p>
                </div>
                <div class="divider"></div>
                <div class="newsletter-content">
                    <div class="section-description">
                        הצטרפו לעדכונים במייל
                    </div>
                    <iframe
                        scrolling="no"
                        style="width:100%!important; height:120px; border:none!important; border-radius:12px; background:#fff; box-shadow:0 2px 8px rgba(15,52,96,0.07);"
                        src="https://buttondown.com/nirstam?as_embed=true"
                        title="הרשמה לניוזלטר"
                    ></iframe>
                    <hr style="margin: 24px 0 16px 0; width: 100%; border: none; border-top: 1.5px solid #eee;">
                    <div class="section-description">בארכיון תוכל למצוא דפי מחקר ישנים שהוסרו מהמערכת הראשית, לצורך עיון היסטורי בלבד.</div>
                    <a href="https://thekinghippopotamus.github.io/marketBit_archives/" target="_blank" rel="noopener" class="archive-link-btn">
                        לעיון בארכיון דפי מחקר היסטוריים
                    </a>
                </div>
            </div>
        </div>
            </div>
            <div class="disclaimer">
                <strong>הסתייגות משפטית:</strong>
                המידע הנ״ל מבוסס על מקורות מידע שונים ועלול להשתנות בכל עת. המידע המוזכר בכתבה זו מוגבל לצורך מחקר והנאה ואין לראות בכתוב המלצה להשקעה. יש להתייעץ עם יועץ פיננסי לפני קבלת החלטות השקעה.
                <br><br>
                <strong>הערה:</strong> הניתוח נוצר באמצעות מודל בינה מלאכותית ועלול לכלול שגיאות כתיב או ניסוח. אנו מתנצלים מראש על אי-הדיוקים האפשריים.
                <br><br>
                <strong>מקורות המידע:</strong> Finviz, Briefing.com, Zacks, Alpha Vantage, Quandl,MarketBeat
                <h3>Hippopotamus Research</h3>
            </div>
        </div>
        
        <div class="footer">
            <div class="timestamp">נוצר ב: 18/06/2025 12:19</div>
            <div class="source">מקורות: Finviz, Briefing.com, Zacks, Alpha Vantage, Quandl,MarketBeat | ניתוח באמצעות aya-expanse:8b</div>
        </div>
    </div>

    <script>
        // פונקציה לטעינת הכתבות מהמטא-דאטה
        async function loadArticles() {
            try {
                console.log('🔄 מתחיל טעינת כתבות...');
                
                // הוספת timestamp למניעת קאש
                const timestamp = new Date().getTime();
                const url = `data/articles_metadata.json?t=${timestamp}`;
                console.log('📡 טוען מ:', url);
                
                const response = await fetch(url);
                console.log('📊 תגובת שרת:', response.status, response.statusText);
                
                if (!response.ok) {
                    throw new Error(`שגיאת שרת: ${response.status} ${response.statusText}`);
                }
                
                const metadata = await response.json();
                console.log('📋 מטא-דאטה נטענה:', metadata.length, 'כתבות');
                
                if (metadata.length === 0) {
                    console.log('⚠️ אין כתבות זמינות');
                    showNoArticles();
                    return;
                }
                
                // מיון לפי תאריך (חדש ביותר קודם)
                metadata.sort((a, b) => {
                    const dateA = new Date(a.timestamp.split(' ')[0].split('/').reverse().join('-'));
                    const dateB = new Date(b.timestamp.split(' ')[0].split('/').reverse().join('-'));
                    return dateB - dateA;
                });
                
                console.log('✅ מציג כתבות...');
                displayArticles(metadata);
                
            } catch (error) {
                console.error('❌ שגיאה בטעינת כתבות:', error);
                showError(error.message);
            }
        }
        
        // פונקציה למיון לפי זמן פרסום
        function sortByPublicationTime(articles) {
            return articles.sort((a, b) => {
                // המרת התאריך לפורמט ISO
                const dateA = new Date(a.timestamp.split(' ')[0].split('/').reverse().join('-') + ' ' + a.timestamp.split(' ')[1]);
                const dateB = new Date(b.timestamp.split(' ')[0].split('/').reverse().join('-') + ' ' + b.timestamp.split(' ')[1]);
                return dateB - dateA; // חדש ביותר קודם
            });
        }
        
        function cleanSummary(summary) {
            if (!summary) return '';
            // Remove all variations of TITLE, SUBTITLE, PARA markers (with/without #, with/without spaces)
            return summary
                .replace(/(^|\n)\s*(TITLE[#]*|SUBTITLE[#]*|#*SUBTITLE[#]*|PARA[#]*|#*PARA[#]*|##+)\s*/gi, '$1')
                .replace(/TITLE[#]*|SUBTITLE[#]*|#*SUBTITLE[#]*|PARA[#]*|#*PARA[#]*|##+/gi, '')
                .replace(/\n{2,}/g, '\n')
                .replace(/^\s+|\s+$/g, '');
        }
        
        // פונקציה ליצירת HTML של התגים
        function generateTagsHTML(activeTag = 'all') {
            return `
                <div class="tags-section" style="margin: 0 auto 0 auto; width: 100%; text-align: center;">
                    <div class="tags-container" style="display: flex; flex-wrap: wrap; justify-content: center; gap: 8px; margin-bottom: 0; width: 100%;">
                        <button class="tag-btn ${activeTag === 'all' ? 'active' : ''}" data-tag="all" style="background: ${activeTag === 'all' ? 'linear-gradient(135deg, #4a148c 60%, #6a1b9a 100%)' : 'rgba(255,255,255,0.1)'}; color: ${activeTag === 'all' ? 'white' : 'var(--text-light)'}; border: ${activeTag === 'all' ? 'none' : '1px solid rgba(255,255,255,0.3)'}; padding: 10px 20px; border-radius: 20px; cursor: pointer; font-size: 1.1em; transition: all 0.3s ease; box-shadow: ${activeTag === 'all' ? '0 4px 16px rgba(74, 20, 140, 0.3)' : 'none'};">
                            <i class="fas fa-globe"></i> הכל
                        </button>
                        <button class="tag-btn ${activeTag === 'סקטור: Information Technology' ? 'active' : ''}" data-tag="סקטור: Information Technology" style="background: ${activeTag === 'סקטור: Information Technology' ? 'linear-gradient(135deg, #4a148c 60%, #6a1b9a 100%)' : 'rgba(255,255,255,0.1)'}; color: ${activeTag === 'סקטור: Information Technology' ? 'white' : 'var(--text-light)'}; border: ${activeTag === 'סקטור: Information Technology' ? 'none' : '1px solid rgba(255,255,255,0.3)'}; padding: 10px 20px; border-radius: 20px; cursor: pointer; font-size: 1.1em; transition: all 0.3s ease; box-shadow: ${activeTag === 'סקטור: Information Technology' ? '0 4px 16px rgba(74, 20, 140, 0.3)' : 'none'};">
                            <i class="fas fa-microchip"></i> טכנולוגיה
                        </button>
                        <button class="tag-btn ${activeTag === 'סקטור: Financials' ? 'active' : ''}" data-tag="סקטור: Financials" style="background: ${activeTag === 'סקטור: Financials' ? 'linear-gradient(135deg, #4a148c 60%, #6a1b9a 100%)' : 'rgba(255,255,255,0.1)'}; color: ${activeTag === 'סקטור: Financials' ? 'white' : 'var(--text-light)'}; border: ${activeTag === 'סקטור: Financials' ? 'none' : '1px solid rgba(255,255,255,0.3)'}; padding: 10px 20px; border-radius: 20px; cursor: pointer; font-size: 1.1em; transition: all 0.3s ease; box-shadow: ${activeTag === 'סקטור: Financials' ? '0 4px 16px rgba(74, 20, 140, 0.3)' : 'none'};">
                            <i class="fas fa-chart-line"></i> פיננסים
                        </button>
                        <button class="tag-btn ${activeTag === 'סקטור: Health Care' ? 'active' : ''}" data-tag="סקטור: Health Care" style="background: ${activeTag === 'סקטור: Health Care' ? 'linear-gradient(135deg, #4a148c 60%, #6a1b9a 100%)' : 'rgba(255,255,255,0.1)'}; color: ${activeTag === 'סקטור: Health Care' ? 'white' : 'var(--text-light)'}; border: ${activeTag === 'סקטור: Health Care' ? 'none' : '1px solid rgba(255,255,255,0.3)'}; padding: 10px 20px; border-radius: 20px; cursor: pointer; font-size: 1.1em; transition: all 0.3s ease; box-shadow: ${activeTag === 'סקטור: Health Care' ? '0 4px 16px rgba(74, 20, 140, 0.3)' : 'none'};">
                            <i class="fas fa-heartbeat"></i> בריאות
                        </button>
                        <button class="tag-btn ${activeTag === 'סקטור: Consumer Discretionary' ? 'active' : ''}" data-tag="סקטור: Consumer Discretionary" style="background: ${activeTag === 'סקטור: Consumer Discretionary' ? 'linear-gradient(135deg, #4a148c 60%, #6a1b9a 100%)' : 'rgba(255,255,255,0.1)'}; color: ${activeTag === 'סקטור: Consumer Discretionary' ? 'white' : 'var(--text-light)'}; border: ${activeTag === 'סקטור: Consumer Discretionary' ? 'none' : '1px solid rgba(255,255,255,0.3)'}; padding: 10px 20px; border-radius: 20px; cursor: pointer; font-size: 1.1em; transition: all 0.3s ease; box-shadow: ${activeTag === 'סקטור: Consumer Discretionary' ? '0 4px 16px rgba(74, 20, 140, 0.3)' : 'none'};">
                            <i class="fas fa-shopping-cart"></i> צריכה
                        </button>
                        <button class="tag-btn ${activeTag === 'סקטור: Communication Services' ? 'active' : ''}" data-tag="סקטור: Communication Services" style="background: ${activeTag === 'סקטור: Communication Services' ? 'linear-gradient(135deg, #4a148c 60%, #6a1b9a 100%)' : 'rgba(255,255,255,0.1)'}; color: ${activeTag === 'סקטור: Communication Services' ? 'white' : 'var(--text-light)'}; border: ${activeTag === 'סקטור: Communication Services' ? 'none' : '1px solid rgba(255,255,255,0.3)'}; padding: 10px 20px; border-radius: 20px; cursor: pointer; font-size: 1.1em; transition: all 0.3s ease; box-shadow: ${activeTag === 'סקטור: Communication Services' ? '0 4px 16px rgba(74, 20, 140, 0.3)' : 'none'};">
                            <i class="fas fa-broadcast-tower"></i> תקשורת
                        </button>
                        <button class="tag-btn ${activeTag === 'סקטור: Energy' ? 'active' : ''}" data-tag="סקטור: Energy" style="background: ${activeTag === 'סקטור: Energy' ? 'linear-gradient(135deg, #4a148c 60%, #6a1b9a 100%)' : 'rgba(255,255,255,0.1)'}; color: ${activeTag === 'סקטור: Energy' ? 'white' : 'var(--text-light)'}; border: ${activeTag === 'סקטור: Energy' ? 'none' : '1px solid rgba(255,255,255,0.3)'}; padding: 10px 20px; border-radius: 20px; cursor: pointer; font-size: 1.1em; transition: all 0.3s ease; box-shadow: ${activeTag === 'סקטור: Energy' ? '0 4px 16px rgba(74, 20, 140, 0.3)' : 'none'};">
                            <i class="fas fa-bolt"></i> אנרגיה
                        </button>
                        <button class="tag-btn ${activeTag === 'סקטור: Industrials' ? 'active' : ''}" data-tag="סקטור: Industrials" style="background: ${activeTag === 'סקטור: Industrials' ? 'linear-gradient(135deg, #4a148c 60%, #6a1b9a 100%)' : 'rgba(255,255,255,0.1)'}; color: ${activeTag === 'סקטור: Industrials' ? 'white' : 'var(--text-light)'}; border: ${activeTag === 'סקטור: Industrials' ? 'none' : '1px solid rgba(255,255,255,0.3)'}; padding: 10px 20px; border-radius: 20px; cursor: pointer; font-size: 1.1em; transition: all 0.3s ease; box-shadow: ${activeTag === 'סקטור: Industrials' ? '0 4px 16px rgba(74, 20, 140, 0.3)' : 'none'};">
                            <i class="fas fa-industry"></i> תעשייה
                        </button>
                        <button class="tag-btn ${activeTag === 'סקטור: Consumer Staples' ? 'active' : ''}" data-tag="סקטור: Consumer Staples" style="background: ${activeTag === 'סקטור: Consumer Staples' ? 'linear-gradient(135deg, #4a148c 60%, #6a1b9a 100%)' : 'rgba(255,255,255,0.1)'}; color: ${activeTag === 'סקטור: Consumer Staples' ? 'white' : 'var(--text-light)'}; border: ${activeTag === 'סקטור: Consumer Staples' ? 'none' : '1px solid rgba(255,255,255,0.3)'}; padding: 10px 20px; border-radius: 20px; cursor: pointer; font-size: 1.1em; transition: all 0.3s ease; box-shadow: ${activeTag === 'סקטור: Consumer Staples' ? '0 4px 16px rgba(74, 20, 140, 0.3)' : 'none'};">
                            <i class="fas fa-home"></i> צריכה בסיסית
                        </button>
                        <button class="tag-btn ${activeTag === 'סקטור: Utilities' ? 'active' : ''}" data-tag="סקטור: Utilities" style="background: ${activeTag === 'סקטור: Utilities' ? 'linear-gradient(135deg, #4a148c 60%, #6a1b9a 100%)' : 'rgba(255,255,255,0.1)'}; color: ${activeTag === 'סקטור: Utilities' ? 'white' : 'var(--text-light)'}; border: ${activeTag === 'סקטור: Utilities' ? 'none' : '1px solid rgba(255,255,255,0.3)'}; padding: 10px 20px; border-radius: 20px; cursor: pointer; font-size: 1.1em; transition: all 0.3s ease; box-shadow: ${activeTag === 'סקטור: Utilities' ? '0 4px 16px rgba(74, 20, 140, 0.3)' : 'none'};">
                            <i class="fas fa-plug"></i> שירותים
                        </button>
                        <button class="tag-btn ${activeTag === 'סקטור: Materials' ? 'active' : ''}" data-tag="סקטור: Materials" style="background: ${activeTag === 'סקטור: Materials' ? 'linear-gradient(135deg, #4a148c 60%, #6a1b9a 100%)' : 'rgba(255,255,255,0.1)'}; color: ${activeTag === 'סקטור: Materials' ? 'white' : 'var(--text-light)'}; border: ${activeTag === 'סקטור: Materials' ? 'none' : '1px solid rgba(255,255,255,0.3)'}; padding: 10px 20px; border-radius: 20px; cursor: pointer; font-size: 1.1em; transition: all 0.3s ease; box-shadow: ${activeTag === 'סקטור: Materials' ? '0 4px 16px rgba(74, 20, 140, 0.3)' : 'none'};">
                            <i class="fas fa-cube"></i> חומרים
                        </button>
                        <button class="tag-btn ${activeTag === 'סקטור: Real Estate' ? 'active' : ''}" data-tag="סקטור: Real Estate" style="background: ${activeTag === 'סקטור: Real Estate' ? 'linear-gradient(135deg, #4a148c 60%, #6a1b9a 100%)' : 'rgba(255,255,255,0.1)'}; color: ${activeTag === 'סקטור: Real Estate' ? 'white' : 'var(--text-light)'}; border: ${activeTag === 'סקטור: Real Estate' ? 'none' : '1px solid rgba(255,255,255,0.3)'}; padding: 10px 20px; border-radius: 20px; cursor: pointer; font-size: 1.1em; transition: all 0.3s ease; box-shadow: ${activeTag === 'סקטור: Real Estate' ? '0 4px 16px rgba(74, 20, 140, 0.3)' : 'none'};">
                            <i class="fas fa-building"></i> נדל"ן
                        </button>
                    </div>
                </div>
            `;
        }
        
        // הוספת המאזין רק אחרי שהאלמנט קיים
        function displayArticles(metadata, filterValue) {
            const container = document.getElementById('articles-container');
            const sortedArticles = sortByPublicationTime([...metadata]);
            // סינון לפי חיפוש
            let filtered = sortedArticles;
            if (filterValue) {
                const val = filterValue.trim().toLowerCase();
                filtered = sortedArticles.filter(article => article.ticker.toLowerCase().includes(val));
            }
            let html = `
                <div class="search-tags-container">
                    <div style="background: linear-gradient(135deg, rgba(233, 69, 96, 0.15) 0%, rgba(15, 52, 96, 0.15) 100%); border-radius: 8px; padding: 12px 20px; margin-bottom: 30px; text-align: center; width: 100%; box-shadow: 0 4px 16px rgba(233, 69, 96, 0.1); backdrop-filter: blur(10px);">
                        <h3 style="color: #fff; margin-bottom: 10px; text-shadow: 0 2px 4px rgba(0,0,0,0.3); font-weight: 600;"></h3>
                        <p style="color: rgba(255,255,255,0.9); font-size: 1.1em; text-shadow: 0 1px 2px rgba(0,0,0,0.2);">סה\"כ כתבות: ${sortedArticles.length} | כתבה אחרונה: ${sortedArticles[0].timestamp}</p>
                        <div class=\"scroll-hint\" style=\"color: rgba(255,255,255,0.7); margin-top: 8px;\"><i class=\"fas fa-angle-double-left\"></i> <i class=\"fas fa-angle-double-right\"></i></div>
                </div>
                    <div style="width: 100%; max-width: 480px; margin: 0 auto 24px auto;">
                        <form class="search-bar" onsubmit="return false;" id="searchForm">
                            <i class="fas fa-search"></i>
                            <input type="text" id="searchInput" placeholder="חפש טיקר (למשל: AAPL, TSLA, META)" autocomplete="off" enterkeyhint="search" value="${filterValue || ''}">
                            <button type="button" id="clearButton" class="clear-button" style="display: ${filterValue && filterValue.length > 0 ? 'block' : 'none'};">
                                <i class="fas fa-times"></i>
                            </button>
                            <button type="submit" id="searchButton" class="search-button">
                                <i class="fas fa-search"></i>
                            </button>
                    </form>
                </div>
                    <!-- אזור התגים -->
                    <div class="tags-section" style="margin: 0 auto 0 auto; width: 100%; text-align: center;">
                        <div class="tags-container" style="display: flex; flex-wrap: wrap; justify-content: center; gap: 8px; margin-bottom: 0; width: 100%;">
                            <button class="tag-btn active" data-tag="all" style="background: linear-gradient(135deg, #4a148c 60%, #6a1b9a 100%); color: white; border: none; padding: 10px 20px; border-radius: 20px; cursor: pointer; font-size: 1.1em; transition: all 0.3s ease; box-shadow: 0 4px 16px rgba(74, 20, 140, 0.3);">
                                <i class="fas fa-globe"></i> הכל
                            </button>
                            <button class="tag-btn" data-tag="סקטור: Information Technology" style="background: rgba(255,255,255,0.1); color: var(--text-light); border: 1px solid rgba(255,255,255,0.3); padding: 10px 20px; border-radius: 20px; cursor: pointer; font-size: 1.1em; transition: all 0.3s ease;">
                                <i class="fas fa-microchip"></i> טכנולוגיה
                            </button>
                            <button class="tag-btn" data-tag="סקטור: Financials" style="background: rgba(255,255,255,0.1); color: var(--text-light); border: 1px solid rgba(255,255,255,0.3); padding: 10px 20px; border-radius: 20px; cursor: pointer; font-size: 1.1em; transition: all 0.3s ease;">
                                <i class="fas fa-chart-line"></i> פיננסים
                            </button>
                            <button class="tag-btn" data-tag="סקטור: Health Care" style="background: rgba(255,255,255,0.1); color: var(--text-light); border: 1px solid rgba(255,255,255,0.3); padding: 10px 20px; border-radius: 20px; cursor: pointer; font-size: 1.1em; transition: all 0.3s ease;">
                                <i class="fas fa-heartbeat"></i> בריאות
                            </button>
                            <button class="tag-btn" data-tag="סקטור: Consumer Discretionary" style="background: rgba(255,255,255,0.1); color: var(--text-light); border: 1px solid rgba(255,255,255,0.3); padding: 10px 20px; border-radius: 20px; cursor: pointer; font-size: 1.1em; transition: all 0.3s ease;">
                                <i class="fas fa-shopping-cart"></i> צריכה
                            </button>
                            <button class="tag-btn" data-tag="סקטור: Communication Services" style="background: rgba(255,255,255,0.1); color: var(--text-light); border: 1px solid rgba(255,255,255,0.3); padding: 10px 20px; border-radius: 20px; cursor: pointer; font-size: 1.1em; transition: all 0.3s ease;">
                                <i class="fas fa-broadcast-tower"></i> תקשורת
                            </button>
                            <button class="tag-btn" data-tag="סקטור: Energy" style="background: rgba(255,255,255,0.1); color: var(--text-light); border: 1px solid rgba(255,255,255,0.3); padding: 10px 20px; border-radius: 20px; cursor: pointer; font-size: 1.1em; transition: all 0.3s ease;">
                                <i class="fas fa-bolt"></i> אנרגיה
                            </button>
                            <button class="tag-btn" data-tag="סקטור: Industrials" style="background: rgba(255,255,255,0.1); color: var(--text-light); border: 1px solid rgba(255,255,255,0.3); padding: 10px 20px; border-radius: 20px; cursor: pointer; font-size: 1.1em; transition: all 0.3s ease;">
                                <i class="fas fa-industry"></i> תעשייה
                            </button>
                            <button class="tag-btn" data-tag="סקטור: Consumer Staples" style="background: rgba(255,255,255,0.1); color: var(--text-light); border: 1px solid rgba(255,255,255,0.3); padding: 10px 20px; border-radius: 20px; cursor: pointer; font-size: 1.1em; transition: all 0.3s ease;">
                                <i class="fas fa-home"></i> צריכה בסיסית
                            </button>
                            <button class="tag-btn" data-tag="סקטור: Utilities" style="background: rgba(255,255,255,0.1); color: var(--text-light); border: 1px solid rgba(255,255,255,0.3); padding: 10px 20px; border-radius: 20px; cursor: pointer; font-size: 1.1em; transition: all 0.3s ease;">
                                <i class="fas fa-plug"></i> שירותים
                            </button>
                            <button class="tag-btn" data-tag="סקטור: Materials" style="background: rgba(255,255,255,0.1); color: var(--text-light); border: 1px solid rgba(255,255,255,0.3); padding: 10px 20px; border-radius: 20px; cursor: pointer; font-size: 1.1em; transition: all 0.3s ease;">
                                <i class="fas fa-cube"></i> חומרים
                            </button>
                            <button class="tag-btn" data-tag="סקטור: Real Estate" style="background: rgba(255,255,255,0.1); color: var(--text-light); border: 1px solid rgba(255,255,255,0.3); padding: 10px 20px; border-radius: 20px; cursor: pointer; font-size: 1.1em; transition: all 0.3s ease;">
                                <i class="fas fa-building"></i> נדל"ן
                            </button>
                        </div>
                    </div>
                </div>
                <div class="articles-grid">
            `;
            
            if (filtered.length === 0) {
                html += `<div style='color:#e94560;text-align:center;width:100%;font-size:1.1em;padding:40px;'>לא נמצאו כתבות לטיקר שחיפשת</div>`;
            } else {
                filtered.forEach(article => {
                    html += `
                        <div class=\"article-card\">\n                            <div class=\"article-ticker\">${article.ticker}</div>\n                            <h3 class=\"article-title\">${article.title}</h3>\n                            <p class=\"article-summary\">${cleanSummary(article.summary)}</p>\n                            <div class=\"article-meta\">\n                                <span>📅 ${article.timestamp}</span>\n                                <a href=\"articles/${article.filename}\" class=\"article-link\">קרא כתבה</a>\n                            </div>\n                        </div>\n                    `;
                });
            }
            html += '</div>';
            container.innerHTML = html;
            
            // הוספת מאזינים לכפתורי התגים
            const tagButtons = document.querySelectorAll('.tag-btn');
            tagButtons.forEach(button => {
                button.addEventListener('click', function() {
                    // הסרת הפעלה מכל הכפתורים
                    tagButtons.forEach(btn => {
                        btn.classList.remove('active');
                        btn.style.background = 'rgba(255,255,255,0.1)';
                        btn.style.color = 'var(--text-light)';
                        btn.style.border = '1px solid rgba(255,255,255,0.3)';
                        btn.style.boxShadow = 'none';
                    });
                    
                    // הפעלת הכפתור הנוכחי
                    this.classList.add('active');
                    this.style.background = 'linear-gradient(135deg, #4a148c 60%, #6a1b9a 100%)';
                    this.style.color = 'white';
                    this.style.border = 'none';
                    this.style.boxShadow = '0 4px 16px rgba(74, 20, 140, 0.3)';
                    
                    // ביצוע סינון לפי התג
                    const selectedTag = this.getAttribute('data-tag');
                    if (selectedTag === 'all') {
                        displayArticles(metadata, filterValue);
                    } else {
                        filterByTag(metadata, selectedTag, filterValue);
                    }
                });
            });
            
            // הוספת מאזינים לשורת החיפוש
            setupSearchListeners(metadata, 'all', filterValue);
        }
        
        function showNoArticles() {
            const container = document.getElementById('articles-container');
            container.innerHTML = `
                <div class="no-articles">
                    <i class="fas fa-newspaper"></i>
                    <h3>אין כתבות זמינות כרגע</h3>
                    <p>הכתבות הראשונות יופיעו כאן בקרוב</p>
                </div>
            `;
        }
        
        function showError(message) {
            const container = document.getElementById('articles-container');
            container.innerHTML = `
                <div class="error-message" style="background: #fee; border: 1px solid #fcc; padding: 20px; border-radius: 10px; text-align: center; color: #c33;">
                    <h3>שגיאה בטעינת כתבות</h3>
                    <p>${message}</p>
                    <button onclick="loadArticles()" style="background: var(--accent-color); color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; margin-top: 10px;">
                        נסה שוב
                    </button>
                </div>
            `;
        }
        
        function loadArticlesWithFilter(filterValue) {
            fetch('data/articles_metadata.json?t=' + new Date().getTime())
                .then(r => r.json())
                .then(metadata => displayArticles(metadata, filterValue));
        }
        
        // פונקציה להחלפת כותרות משנה דינמית
        function initDynamicSubtitle() {
            const subtitleElement = document.querySelector('.brand-subtitle');
            if (!subtitleElement) return;
            
            const subtitles = [
                "מערכת מחקר מתקדמת בזמן אמת",
               "סריקה וניטור חדשות באמצעות אלגוריתם מתקדם",
               "עיבוד באמצעות LLM 8B",
               "אלגוריתם פרסום יומי מתוזמן"
            ];
            
            let currentIndex = 0;
            
            function changeSubtitle() {
                subtitleElement.style.opacity = '0';
                subtitleElement.style.transform = 'translateY(-10px)';
                
                setTimeout(() => {
                    subtitleElement.textContent = subtitles[currentIndex];
                    subtitleElement.style.opacity = '1';
                    subtitleElement.style.transform = 'translateY(0)';
                    
                    currentIndex = (currentIndex + 1) % subtitles.length;
                }, 300);
            }
            
            // החלפת כותרת משנה כל 4 שניות
            setInterval(changeSubtitle, 4000);
            
            // אפקט מיוחד בלחיצה
            subtitleElement.addEventListener('click', function() {
                this.style.transform = 'scale(1.1) rotate(2deg)';
                setTimeout(() => {
                    this.style.transform = 'scale(1) rotate(0deg)';
                }, 200);
            });
        }
        
        // טעינת הכתבות כשהדף נטען
        document.addEventListener('DOMContentLoaded', function() {
            loadArticles();
            initDynamicSubtitle();
            // X share button for main page
            var mainShareBtn = document.getElementById('main-x-share-btn');
            if (mainShareBtn) {
                mainShareBtn.addEventListener('click', function(e) {
                    e.preventDefault();
                    var url = encodeURIComponent(window.location.href.split('#')[0]);
                    var text = encodeURIComponent('מחקר שוק חדש של Hippopotamus Research!\nhttps://thekinghippopotamus.github.io/HippoResearch_Marketbeat/');
                    window.open('https://twitter.com/intent/tweet?text=' + text, '_blank', 'noopener');
                });
            }
        });

        // פונקציה לסינון לפי תג
        function filterByTag(metadata, tag, filterValue) {
            const sortedArticles = sortByPublicationTime([...metadata]);
            
            // סינון לפי תג
            const filtered = sortedArticles.filter(article => {
                if (article.tags && Array.isArray(article.tags)) {
                    return article.tags.some(t => t === tag);
                }
                return false;
            });
            
            // הצגת התוצאות באמצעות הפונקציה הקיימת
            updateArticlesDisplay(filtered, sortedArticles, tag, filterValue);
        }
        
        // פונקציה עזר לעדכון תצוגת הכתבות
        function updateArticlesDisplay(filtered, allArticles, currentTag, filterValue) {
            const container = document.getElementById('articles-container');
            
            // יצירת ה-HTML מחדש עם התוצאות המסוננות
            let html = `
                <div class="search-tags-container">
                    <div style="background: linear-gradient(135deg, rgba(233, 69, 96, 0.15) 0%, rgba(15, 52, 96, 0.15) 100%); border-radius: 8px; padding: 12px 20px; margin-bottom: 30px; text-align: center; width: 100%; box-shadow: 0 4px 16px rgba(233, 69, 96, 0.1); backdrop-filter: blur(10px);">
                        <h3 style="color: #fff; margin-bottom: 10px; text-shadow: 0 2px 4px rgba(0,0,0,0.3); font-weight: 600;"></h3>
                        <p style="color: rgba(255,255,255,0.9); font-size: 1.1em; text-shadow: 0 1px 2px rgba(0,0,0,0.2);">סה\"כ כתבות: ${allArticles.length} | כתבות בסינון: ${filtered.length} | כתבה אחרונה: ${allArticles[0].timestamp}</p>
                        <div class=\"scroll-hint\" style=\"color: rgba(255,255,255,0.7); margin-top: 8px;\"><i class=\"fas fa-angle-double-left\"></i> <i class=\"fas fa-angle-double-right\"></i></div>
                    </div>
                    <div style="width: 100%; max-width: 480px; margin: 0 auto 24px auto;">
                        <form class="search-bar" onsubmit="return false;" id="searchForm">
                            <i class="fas fa-search"></i>
                            <input type="text" id="searchInput" placeholder="חפש טיקר (למשל: AAPL, TSLA, META)" autocomplete="off" enterkeyhint="search" value="${filterValue || ''}">
                            <button type="button" id="clearButton" class="clear-button" style="display: ${filterValue && filterValue.length > 0 ? 'block' : 'none'};">
                                <i class="fas fa-times"></i>
                            </button>
                            <button type="submit" id="searchButton" class="search-button">
                                <i class="fas fa-search"></i>
                            </button>
                        </form>
                    </div>
                    <!-- אזור התגים -->
                    <div class="tags-section" style="margin: 0 auto 0 auto; width: 100%; text-align: center;">
                        <div class="tags-container" style="display: flex; flex-wrap: wrap; justify-content: center; gap: 8px; margin-bottom: 0; width: 100%;">
                            <button class="tag-btn" data-tag="all" style="background: rgba(255,255,255,0.1); color: var(--text-light); border: 1px solid rgba(255,255,255,0.3); padding: 10px 20px; border-radius: 20px; cursor: pointer; font-size: 1.1em; transition: all 0.3s ease;">
                                <i class="fas fa-globe"></i> הכל
                            </button>
                            <button class="tag-btn ${currentTag === 'סקטור: Information Technology' ? 'active' : ''}" data-tag="סקטור: Information Technology" style="background: ${currentTag === 'סקטור: Information Technology' ? 'linear-gradient(135deg, #4a148c 60%, #6a1b9a 100%)' : 'rgba(255,255,255,0.1)'}; color: ${currentTag === 'סקטור: Information Technology' ? 'white' : 'var(--text-light)'}; border: ${currentTag === 'סקטור: Information Technology' ? 'none' : '1px solid rgba(255,255,255,0.3)'}; padding: 10px 20px; border-radius: 20px; cursor: pointer; font-size: 1.1em; transition: all 0.3s ease; box-shadow: ${currentTag === 'סקטור: Information Technology' ? '0 4px 16px rgba(74, 20, 140, 0.3)' : 'none'};">
                                <i class="fas fa-microchip"></i> טכנולוגיה
                            </button>
                            <button class="tag-btn ${currentTag === 'סקטור: Financials' ? 'active' : ''}" data-tag="סקטור: Financials" style="background: ${currentTag === 'סקטור: Financials' ? 'linear-gradient(135deg, #4a148c 60%, #6a1b9a 100%)' : 'rgba(255,255,255,0.1)'}; color: ${currentTag === 'סקטור: Financials' ? 'white' : 'var(--text-light)'}; border: ${currentTag === 'סקטור: Financials' ? 'none' : '1px solid rgba(255,255,255,0.3)'}; padding: 10px 20px; border-radius: 20px; cursor: pointer; font-size: 1.1em; transition: all 0.3s ease; box-shadow: ${currentTag === 'סקטור: Financials' ? '0 4px 16px rgba(74, 20, 140, 0.3)' : 'none'};">
                                <i class="fas fa-chart-line"></i> פיננסים
                            </button>
                            <button class="tag-btn ${currentTag === 'סקטור: Health Care' ? 'active' : ''}" data-tag="סקטור: Health Care" style="background: ${currentTag === 'סקטור: Health Care' ? 'linear-gradient(135deg, #4a148c 60%, #6a1b9a 100%)' : 'rgba(255,255,255,0.1)'}; color: ${currentTag === 'סקטור: Health Care' ? 'white' : 'var(--text-light)'}; border: ${currentTag === 'סקטור: Health Care' ? 'none' : '1px solid rgba(255,255,255,0.3)'}; padding: 10px 20px; border-radius: 20px; cursor: pointer; font-size: 1.1em; transition: all 0.3s ease; box-shadow: ${currentTag === 'סקטור: Health Care' ? '0 4px 16px rgba(74, 20, 140, 0.3)' : 'none'};">
                                <i class="fas fa-heartbeat"></i> בריאות
                            </button>
                            <button class="tag-btn ${currentTag === 'סקטור: Consumer Discretionary' ? 'active' : ''}" data-tag="סקטור: Consumer Discretionary" style="background: ${currentTag === 'סקטור: Consumer Discretionary' ? 'linear-gradient(135deg, #4a148c 60%, #6a1b9a 100%)' : 'rgba(255,255,255,0.1)'}; color: ${currentTag === 'סקטור: Consumer Discretionary' ? 'white' : 'var(--text-light)'}; border: ${currentTag === 'סקטור: Consumer Discretionary' ? 'none' : '1px solid rgba(255,255,255,0.3)'}; padding: 10px 20px; border-radius: 20px; cursor: pointer; font-size: 1.1em; transition: all 0.3s ease; box-shadow: ${currentTag === 'סקטור: Consumer Discretionary' ? '0 4px 16px rgba(74, 20, 140, 0.3)' : 'none'};">
                                <i class="fas fa-shopping-cart"></i> צריכה
                            </button>
                            <button class="tag-btn ${currentTag === 'סקטור: Communication Services' ? 'active' : ''}" data-tag="סקטור: Communication Services" style="background: ${currentTag === 'סקטור: Communication Services' ? 'linear-gradient(135deg, #4a148c 60%, #6a1b9a 100%)' : 'rgba(255,255,255,0.1)'}; color: ${currentTag === 'סקטור: Communication Services' ? 'white' : 'var(--text-light)'}; border: ${currentTag === 'סקטור: Communication Services' ? 'none' : '1px solid rgba(255,255,255,0.3)'}; padding: 10px 20px; border-radius: 20px; cursor: pointer; font-size: 1.1em; transition: all 0.3s ease; box-shadow: ${currentTag === 'סקטור: Communication Services' ? '0 4px 16px rgba(74, 20, 140, 0.3)' : 'none'};">
                                <i class="fas fa-broadcast-tower"></i> תקשורת
                            </button>
                            <button class="tag-btn ${currentTag === 'סקטור: Energy' ? 'active' : ''}" data-tag="סקטור: Energy" style="background: ${currentTag === 'סקטור: Energy' ? 'linear-gradient(135deg, #4a148c 60%, #6a1b9a 100%)' : 'rgba(255,255,255,0.1)'}; color: ${currentTag === 'סקטור: Energy' ? 'white' : 'var(--text-light)'}; border: ${currentTag === 'סקטור: Energy' ? 'none' : '1px solid rgba(255,255,255,0.3)'}; padding: 10px 20px; border-radius: 20px; cursor: pointer; font-size: 1.1em; transition: all 0.3s ease; box-shadow: ${currentTag === 'סקטור: Energy' ? '0 4px 16px rgba(74, 20, 140, 0.3)' : 'none'};">
                                <i class="fas fa-bolt"></i> אנרגיה
                            </button>
                            <button class="tag-btn ${currentTag === 'סקטור: Industrials' ? 'active' : ''}" data-tag="סקטור: Industrials" style="background: ${currentTag === 'סקטור: Industrials' ? 'linear-gradient(135deg, #4a148c 60%, #6a1b9a 100%)' : 'rgba(255,255,255,0.1)'}; color: ${currentTag === 'סקטור: Industrials' ? 'white' : 'var(--text-light)'}; border: ${currentTag === 'סקטור: Industrials' ? 'none' : '1px solid rgba(255,255,255,0.3)'}; padding: 10px 20px; border-radius: 20px; cursor: pointer; font-size: 1.1em; transition: all 0.3s ease; box-shadow: ${currentTag === 'סקטור: Industrials' ? '0 4px 16px rgba(74, 20, 140, 0.3)' : 'none'};">
                                <i class="fas fa-industry"></i> תעשייה
                            </button>
                            <button class="tag-btn ${currentTag === 'סקטור: Consumer Staples' ? 'active' : ''}" data-tag="סקטור: Consumer Staples" style="background: ${currentTag === 'סקטור: Consumer Staples' ? 'linear-gradient(135deg, #4a148c 60%, #6a1b9a 100%)' : 'rgba(255,255,255,0.1)'}; color: ${currentTag === 'סקטור: Consumer Staples' ? 'white' : 'var(--text-light)'}; border: ${currentTag === 'סקטור: Consumer Staples' ? 'none' : '1px solid rgba(255,255,255,0.3)'}; padding: 10px 20px; border-radius: 20px; cursor: pointer; font-size: 1.1em; transition: all 0.3s ease; box-shadow: ${currentTag === 'סקטור: Consumer Staples' ? '0 4px 16px rgba(74, 20, 140, 0.3)' : 'none'};">
                                <i class="fas fa-home"></i> צריכה בסיסית
                            </button>
                            <button class="tag-btn ${currentTag === 'סקטור: Utilities' ? 'active' : ''}" data-tag="סקטור: Utilities" style="background: ${currentTag === 'סקטור: Utilities' ? 'linear-gradient(135deg, #4a148c 60%, #6a1b9a 100%)' : 'rgba(255,255,255,0.1)'}; color: ${currentTag === 'סקטור: Utilities' ? 'white' : 'var(--text-light)'}; border: ${currentTag === 'סקטור: Utilities' ? 'none' : '1px solid rgba(255,255,255,0.3)'}; padding: 10px 20px; border-radius: 20px; cursor: pointer; font-size: 1.1em; transition: all 0.3s ease; box-shadow: ${currentTag === 'סקטור: Utilities' ? '0 4px 16px rgba(74, 20, 140, 0.3)' : 'none'};">
                                <i class="fas fa-plug"></i> שירותים
                            </button>
                            <button class="tag-btn ${currentTag === 'סקטור: Materials' ? 'active' : ''}" data-tag="סקטור: Materials" style="background: ${currentTag === 'סקטור: Materials' ? 'linear-gradient(135deg, #4a148c 60%, #6a1b9a 100%)' : 'rgba(255,255,255,0.1)'}; color: ${currentTag === 'סקטור: Materials' ? 'white' : 'var(--text-light)'}; border: ${currentTag === 'סקטור: Materials' ? 'none' : '1px solid rgba(255,255,255,0.3)'}; padding: 10px 20px; border-radius: 20px; cursor: pointer; font-size: 1.1em; transition: all 0.3s ease; box-shadow: ${currentTag === 'סקטור: Materials' ? '0 4px 16px rgba(74, 20, 140, 0.3)' : 'none'};">
                                <i class="fas fa-cube"></i> חומרים
                            </button>
                            <button class="tag-btn ${currentTag === 'סקטור: Real Estate' ? 'active' : ''}" data-tag="סקטור: Real Estate" style="background: ${currentTag === 'סקטור: Real Estate' ? 'linear-gradient(135deg, #4a148c 60%, #6a1b9a 100%)' : 'rgba(255,255,255,0.1)'}; color: ${currentTag === 'סקטור: Real Estate' ? 'white' : 'var(--text-light)'}; border: ${currentTag === 'סקטור: Real Estate' ? 'none' : '1px solid rgba(255,255,255,0.3)'}; padding: 10px 20px; border-radius: 20px; cursor: pointer; font-size: 1.1em; transition: all 0.3s ease; box-shadow: ${currentTag === 'סקטור: Real Estate' ? '0 4px 16px rgba(74, 20, 140, 0.3)' : 'none'};">
                                <i class="fas fa-building"></i> נדל"ן
                            </button>
                        </div>
                    </div>
                </div>
                <div class="articles-grid">
            `;
            
            if (filtered.length === 0) {
                html += `<div style='color:#e94560;text-align:center;width:100%;font-size:1.1em;padding:40px;'>לא נמצאו כתבות עם התג "${currentTag}"</div>`;
            } else {
                filtered.forEach(article => {
                    html += `
                        <div class=\"article-card\">\n                            <div class=\"article-ticker\">${article.ticker}</div>\n                            <h3 class=\"article-title\">${article.title}</h3>\n                            <p class=\"article-summary\">${cleanSummary(article.summary)}</p>\n                            <div class=\"article-meta\">\n                                <span>📅 ${article.timestamp}</span>\n                                <a href=\"articles/${article.filename}\" class=\"article-link\">קרא כתבה</a>\n                            </div>\n                        </div>\n                    `;
                });
            }
            html += '</div>';
            container.innerHTML = html;
            
            // הוספת מאזינים לכפתורי התגים
            const tagButtons = document.querySelectorAll('.tag-btn');
            tagButtons.forEach(button => {
                button.addEventListener('click', function() {
                    // הסרת הפעלה מכל הכפתורים
                    tagButtons.forEach(btn => {
                        btn.classList.remove('active');
                        btn.style.background = 'rgba(255,255,255,0.1)';
                        btn.style.color = 'var(--text-light)';
                        btn.style.border = '1px solid rgba(255,255,255,0.3)';
                        btn.style.boxShadow = 'none';
                    });
                    
                    // הפעלת הכפתור הנוכחי
                    this.classList.add('active');
                    this.style.background = 'linear-gradient(135deg, #4a148c 60%, #6a1b9a 100%)';
                    this.style.color = 'white';
                    this.style.border = 'none';
                    this.style.boxShadow = '0 4px 16px rgba(74, 20, 140, 0.3)';
                    
                    // ביצוע סינון לפי התג
                    const selectedTag = this.getAttribute('data-tag');
                    if (selectedTag === 'all') {
                        displayArticles(allArticles, filterValue);
            } else {
                        filterByTag(allArticles, selectedTag, filterValue);
                    }
                });
            });
            
            // הוספת מאזינים לשורת החיפוש
            setupSearchListeners(allArticles, currentTag, filterValue);
        }
        
        function setupSearchListeners(articles, tag, filterValue) {
            const searchInput = document.getElementById('searchInput');
            const searchButton = document.getElementById('searchButton');
            const clearButton = document.getElementById('clearButton');
            
            if (searchInput) {
                // הצגת/הסתרת כפתור הניקוי בזמן הקלדה (ללא חיפוש)
                searchInput.addEventListener('input', function() {
                    const value = this.value.trim();
                    
                    if (value.length > 0) {
                        clearButton.style.display = 'block';
                    } else {
                        clearButton.style.display = 'none';
                    }
                });
                
                // פונקציה לביצוע החיפוש
                function performSearch() {
                    const value = searchInput.value.trim();
                    
                    if (tag && tag !== 'all') {
                        const currentFiltered = articles.filter(article => {
                            if (article.tags && Array.isArray(article.tags)) {
                                return article.tags.some(t => t === tag);
                            }
                            return false;
                        });
                        
                        const searchFiltered = currentFiltered.filter(article => 
                            article.ticker.toLowerCase().includes(value.toLowerCase())
                        );
                        
                        updateArticlesDisplay(searchFiltered, articles, tag, value);
                    } else {
                        displayArticles(articles, value);
                    }
                }
                
                // חיפוש בלחיצה על כפתור החיפוש
                searchButton.addEventListener('click', performSearch);
                
                // חיפוש בלחיצה על Enter
                searchInput.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') {
                        e.preventDefault();
                        performSearch();
                    }
                });
                
                // חיפוש בלחיצה על "Done" במובייל
                searchInput.addEventListener('search', function() {
                    performSearch();
                });
                
                // ניקוי החיפוש
                clearButton.addEventListener('click', function() {
                    searchInput.value = '';
                    clearButton.style.display = 'none';
                    
                    if (tag && tag !== 'all') {
                        const currentFiltered = articles.filter(article => {
                            if (article.tags && Array.isArray(article.tags)) {
                                return article.tags.some(t => t === tag);
                            }
                            return false;
                        });
                        updateArticlesDisplay(currentFiltered, articles, tag, '');
                    } else {
                        displayArticles(articles, '');
                    }
                });
            }
        }
    </script>
</body>
</html> 